import{d as S,o as m,k as f,b6 as j,a_ as q,e as h,v as X,q as _,l as r,w as u,m as V,s as G,n as s,a9 as R,b7 as k,a6 as H,a8 as J,aX as C,b0 as y,z as E,F as K,r as Q,b1 as W,a7 as Y,x as Z}from"./index.ca2546a6.js";import{u as B}from"./validation.b283a4a1.js";import{i as N,a as z}from"./ipv4-address-converter.service.c616c195.js";import{c as P}from"./integer-base-converter.model.e0cda1cc.js";import{S as A}from"./SpanCopyable.7d31b4c6.js";import{_ as ee}from"./Table.eaf7a310.js";import{_ as te}from"./Alert.57f607b3.js";import{_ as ne}from"./FormItem.7d600ca2.js";const ae={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},oe=j('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="5" cy="18" r="2"></circle><circle cx="19" cy="6" r="2"></circle><path d="M19 8v5a5 5 0 0 1-5 5h-3l3-3m0 6l-3-3"></path><path d="M5 16v-5a5 5 0 0 1 5-5h3l-3-3m0 6l3-3"></path></g>',1),se=[oe];var le=S({name:"Exchange",render:function(t,a){return m(),f("svg",ae,se)}});function $(n){return(n>>>24)+"."+(n>>16&255)+"."+(n>>8&255)+"."+(n&255)}function b(n,t){return n==null||t==null?-1:1+parseInt(t,2)-parseInt(n,2)}function re(n,t){if(n==null||t==null||b(n,t)<1)return null;let o=32;for(let i=0;i<32;i++)if(n[i]!==t[i]){o=i;break}const d=n.substring(0,o)+"0".repeat(32-o),l=t.substring(0,o)+"1".repeat(32-o);return{start:d,end:l,mask:o}}function de({startIp:n,endIp:t}){const a=P({value:N({ip:n}).toString(),fromBase:10,toBase:2}),o=P({value:N({ip:t}).toString(),fromBase:10,toBase:2}),d=re(a,o);if(d!=null){const l={};return l.newEnd=$(parseInt(d.end,2)),l.newStart=$(parseInt(d.start,2)),l.newCidr=l.newStart+"/"+d.mask,l.newSize=b(d.start,d.end),l.oldSize=b(a,o),l}}const ie=["data-test-id"],ce=["data-test-id"],ue=S({__name:"result-row",props:{label:{default:""},oldValue:{default:""},newValue:{default:""}},setup(n){const t=n,{label:a,oldValue:o,newValue:d}=q(t),l=h(()=>X.kebabCase(a.value));return(i,v)=>{const g=R;return m(),f("tr",null,[_("td",null,[r(g,{strong:""},{default:u(()=>[V(G(s(a)),1)]),_:1})]),_("td",{"data-test-id":s(l)+".old"},[r(A,{value:s(o),class:"monospace"},null,8,["value"])],8,ie),_("td",{"data-test-id":s(l)+".new"},[r(A,{value:s(d)},null,8,["value"])],8,ce)])}}}),_e=_("thead",null,[_("tr",null,[_("th",{scope:"col"},"\xA0"),_("th",{scope:"col"},"old value"),_("th",{scope:"col"},"new value")])],-1),be=S({__name:"ipv4-range-expander",setup(n){const t=k("ipv4-range-expander:startAddress","192.168.1.1"),a=k("ipv4-range-expander:endAddress","192.168.6.255"),o=h(()=>de({startIp:t.value,endIp:a.value})),d=[{label:"Start address",getOldValue:()=>t.value,getNewValue:e=>e==null?void 0:e.newStart},{label:"End address",getOldValue:()=>a.value,getNewValue:e=>e==null?void 0:e.newEnd},{label:"Addresses in range",getOldValue:e=>{var c;return(c=e==null?void 0:e.oldSize)==null?void 0:c.toLocaleString()},getNewValue:e=>{var c;return(c=e==null?void 0:e.newSize)==null?void 0:c.toLocaleString()}},{label:"CIDR",getOldValue:()=>"",getNewValue:e=>e==null?void 0:e.newCidr}],l=h(()=>v.isValid&&i.isValid&&o.value!==void 0),i=B({source:t,rules:[{message:"Invalid ipv4 address",validator:e=>z({ip:e})}]}),v=B({source:a,rules:[{message:"Invalid ipv4 address",validator:e=>z({ip:e})}]});function g(){const e=t.value;t.value=a.value,a.value=e}return(e,c)=>{const x=Y,I=ne,w=J,O=ee,T=R,L=H,D=Z,F=te;return m(),f("div",null,[r(w,{"item-style":"flex:1 1 0"},{default:u(()=>[_("div",null,[r(w,{"item-style":"flex:1 1 0"},{default:u(()=>[r(I,C({label:"Start address"},s(i).attrs),{default:u(()=>[r(x,{value:s(t),"onUpdate:value":c[0]||(c[0]=p=>y(t)?t.value=p:null),placeholder:"Start IPv4 address..."},null,8,["value"])]),_:1},16),r(I,C({label:"End address"},s(v).attrs),{default:u(()=>[r(x,{value:s(a),"onUpdate:value":c[1]||(c[1]=p=>y(a)?a.value=p:null),placeholder:"End IPv4 address..."},null,8,["value"])]),_:1},16)]),_:1}),s(l)?(m(),E(O,{key:0,"data-test-id":"result"},{default:u(()=>[_e,_("tbody",null,[(m(),f(K,null,Q(d,({label:p,getOldValue:M,getNewValue:U})=>r(ue,{key:p,label:p,"old-value":M(s(o)),"new-value":U(s(o))},null,8,["label","old-value","new-value"])),64))])]),_:1})):s(i).isValid&&s(v).isValid?(m(),E(F,{key:1,title:"Invalid combination of start and end IPv4 address",type:"error"},{default:u(()=>[r(w,{vertical:""},{default:u(()=>[r(T,{depth:"3"},{default:u(()=>[V(" The end IPv4 address is lower than the start IPv4 address. This is not valid and no result could be calculated. In the most cases the solution to solve this problem is to change start and end address. ")]),_:1}),r(D,{onClick:g},{default:u(()=>[r(L,{"mr-2":"",component:s(le),depth:"3",size:"22"},null,8,["component"]),V(" Switch start and end IPv4 address ")]),_:1})]),_:1})]),_:1})):W("",!0)])]),_:1})])}}});export{be as default};
