import{d as z,o as h,k as g,q as n,b6 as I,v as R,bq as W,bn as H,F as V,r as A,z as D,w as t,l as e,n as o,br as G,m as M,a3 as J,a6 as L,x as q,aH as Q,a8 as E,b7 as T,e as X,ab as Y,b1 as Z,b0 as ee,s as k,a7 as te,y as ne}from"./index.ca2546a6.js";import{_ as oe}from"./InputNumber.6c53a983.js";import{_ as ae}from"./Scrollbar.0befd17f.js";import{_ as le}from"./Table.eaf7a310.js";import{_ as se}from"./FormItem.7d600ca2.js";import{_ as ue}from"./Divider.d3860b89.js";import"./Remove.21adbc77.js";import"./Button.57c4db1c.js";import"./Add.10f3fa8b.js";const re={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ce=n("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("path",{d:"M12 5v14"}),n("path",{d:"M5 12h14"})],-1),ie=[ce];var K=z({name:"Plus",render:function(s,c){return h(),g("svg",re,ie)}});const pe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},_e=I('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7h16"></path><path d="M10 11v6"></path><path d="M14 11v6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-12"></path><path d="M9 7V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3"></path></g>',1),de=[_e];var O=z({name:"Trash",render:function(s,c){return h(),g("svg",pe,de)}});function N({data:a}){return a.length===0?0:R.sum(a)/a.length}function me({data:a}){const s=N({data:a}),c=a.map(i=>Math.pow(i-s,2));return N({data:c})}function fe({data:a,headerMap:s={}}){if(!Array.isArray(a)||a.length===0)return"";const c=Object.keys(a[0]),i=a.map(u=>Object.values(u)),p=`| ${c.map(u=>{var $;return($=s[u])!=null?$:u}).join(" | ")} |`,y=`| ${c.map(()=>"---").join(" | ")} |`,m=i.map(u=>`| ${u.join(" | ")} |`).join(`
`);return`${p}
${y}
${m}`}const he=z({__name:"dynamic-values",props:{values:null},emits:["update:values"],setup(a,{emit:s}){const c=a,i=W(),p=H(c,"values",s);async function y(){var u;p.value.push(null),await J(),(u=i.value.at(-1))==null||u.focus()}function m(u){var $;if(u===p.value.length-1){y();return}($=i.value.at(u+1))==null||$.focus()}return(u,$)=>{const l=L,r=q,_=Q,v=E;return h(),g("div",null,[(h(!0),g(V,null,A(o(p),(x,d)=>(h(),D(v,{key:d,wrap:!1,style:{"margin-bottom":"5px"},size:5},{default:t(()=>[e(o(oe),{ref_for:!0,ref:o(i).set,value:o(p)[d],"onUpdate:value":f=>o(p)[d]=f,"show-button":!1,placeholder:"Set your measure...",autofocus:"",onKeydown:G(f=>m(d),["enter"])},null,8,["value","onUpdate:value","onKeydown"]),e(_,null,{trigger:t(()=>[e(r,{circle:"",variant:"text",onClick:f=>o(p).splice(d,1)},{default:t(()=>[e(l,{component:o(O),depth:"3",size:"18"},null,8,["component"])]),_:2},1032,["onClick"])]),default:t(()=>[M(" Delete value ")]),_:2},1024)]),_:2},1024))),128)),e(r,{onClick:y},{default:t(()=>[e(l,{component:o(K),depth:"3","mr-2":"",size:"18"},null,8,["component"]),M(" Add a measure ")]),_:1})])}}}),ve={style:{flex:"0 0 100%"}},we={style:{"max-width":"600px",margin:"0 auto"}},Se=z({__name:"benchmark-builder",setup(a){const s=T("benchmark-builder:suites",[{title:"Suite 1",data:[5,10]},{title:"Suite 2",data:[8,12]}]),c=T("benchmark-builder:unit",""),i=l=>Math.round(l*1e3)/1e3,p=X(()=>s.value.map(({data:l,title:r})=>{const _=l.filter(R.isNumber);return{title:r,size:_.length,mean:N({data:_}),variance:me({data:_})}}).sort((l,r)=>l.mean-r.mean).map(({mean:l,variance:r,size:_,title:v},x,d)=>{const f=c.value.trim(),w=d[0].mean,j=l-w,B=w===0?"\u221E":i(l/w),U=x!==0&&w!==l?` (+${i(j)}${f} ; x${B})`:"";return{position:x+1,title:v,mean:`${i(l)}${f}${U}`,variance:`${i(r)}${f}${f?"\xB2":""}`,size:_}})),{copy:y}=Y(),m={title:"Suite",size:"Samples",mean:"Mean",variance:"Variance",position:"Position"};function u(){y(fe({data:p.value,headerMap:m}))}function $(){const l=p.value.flatMap(({title:r,..._})=>[` - ${r}`,...Object.entries(_).map(([v,x])=>{var d;return`    - ${(d=m[v])!=null?d:v}: ${x}`})]).join(`
`);y(l)}return(l,r)=>{const _=te,v=se,x=ue,d=ne,f=L,w=q,j=E,B=ae,U=le;return h(),g(V,null,[e(B,{style:{flex:"1"},"x-scrollable":""},{default:t(()=>[e(j,{wrap:!1,style:{flex:"1"},justify:"center",size:0,"mb-5":""},{default:t(()=>[(h(!0),g(V,null,A(o(s),(b,S)=>(h(),g("div",{key:S},[e(d,{style:{width:"292px",margin:"0 8px 5px"}},{default:t(()=>[e(v,{label:"Suite name:","show-feedback":!1,"label-placement":"left"},{default:t(()=>[e(_,{value:b.title,"onUpdate:value":C=>b.title=C,placeholder:"Suite name..."},null,8,["value","onUpdate:value"])]),_:2},1024),e(x),e(v,{label:"Suite values","show-feedback":!1},{default:t(()=>[e(he,{values:b.data,"onUpdate:values":C=>b.data=C},null,8,["values","onUpdate:values"])]),_:2},1024)]),_:2},1024),e(j,{justify:"center"},{default:t(()=>[o(s).length>1?(h(),D(w,{key:0,variant:"text",onClick:C=>o(s).splice(S,1)},{default:t(()=>[e(f,{component:o(O),depth:"3","mr-2":"",size:"18"},null,8,["component"]),M(" Delete suite ")]),_:2},1032,["onClick"])):Z("",!0),e(w,{variant:"text",onClick:C=>o(s).splice(S+1,0,{data:[0],title:`Suite ${o(s).length+1}`})},{default:t(()=>[e(f,{component:o(K),depth:"3","mr-2":"",size:"18"},null,8,["component"]),M(" Add suite ")]),_:2},1032,["onClick"])]),_:2},1024)]))),128))]),_:1})]),_:1}),n("div",ve,[n("div",we,[e(j,{justify:"center"},{default:t(()=>[e(v,{label:"Unit:","label-placement":"left"},{default:t(()=>[e(_,{value:o(c),"onUpdate:value":r[0]||(r[0]=b=>ee(c)?c.value=b:null),placeholder:"Unit (eg: ms)"},null,8,["value"])]),_:1}),e(w,{onClick:r[1]||(r[1]=b=>s.value=[{title:"Suite 1",data:[]},{title:"Suite 2",data:[]}])},{default:t(()=>[M("Reset suites")]),_:1})]),_:1}),e(U,null,{default:t(()=>[n("thead",null,[n("tr",null,[n("th",null,k(m.position),1),n("th",null,k(m.title),1),n("th",null,k(m.size),1),n("th",null,k(m.mean),1),n("th",null,k(m.variance),1)])]),n("tbody",null,[(h(!0),g(V,null,A(o(p),({title:b,size:S,mean:C,variance:P,position:F})=>(h(),g("tr",{key:b},[n("td",null,k(F),1),n("td",null,k(b),1),n("td",null,k(S),1),n("td",null,k(C),1),n("td",null,k(P),1)]))),128))])]),_:1}),e(j,{justify:"center","mt-5":""},{default:t(()=>[e(w,{onClick:u},{default:t(()=>[M("Copy as markdown table")]),_:1}),e(w,{onClick:$},{default:t(()=>[M("Copy as bullet list")]),_:1})]),_:1})])])],64)}}});export{Se as default};
