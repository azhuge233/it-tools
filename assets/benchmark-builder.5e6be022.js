import{d as V,o as h,k as b,q as t,bI as F,v as R,bS as W,E as J,F as B,r as T,x as D,w as n,l as e,n as o,bT as G,m as M,ai as H,al as E,y as L,aS as Q,an as q,b9 as N,e as X,aq as Y,J as Z,B as ee,s as k,z as te}from"./index.2e6b7445.js";import{_ as ne}from"./c-input-text.1faff010.js";import{_ as oe}from"./InputNumber.6b842416.js";import{_ as ae}from"./Scrollbar.b46a9c32.js";import{_ as le}from"./Table.63b48cf3.js";import{_ as se}from"./Divider.e10b5110.js";import{_ as ue}from"./FormItem.4c07172c.js";import"./random.613c1dc4.js";import"./validation.89ce9e2c.js";import"./Remove.79598fcc.js";import"./Button.c2326440.js";import"./Add.21a61b5d.js";const re={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ie=t("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M12 5v14"}),t("path",{d:"M5 12h14"})],-1),ce=[ie];var I=V({name:"Plus",render:function(s,i){return h(),b("svg",re,ce)}});const pe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},_e=F('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7h16"></path><path d="M10 11v6"></path><path d="M14 11v6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-12"></path><path d="M9 7V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3"></path></g>',1),me=[_e];var K=V({name:"Trash",render:function(s,i){return h(),b("svg",pe,me)}});function A({data:a}){return a.length===0?0:R.sum(a)/a.length}function de({data:a}){const s=A({data:a}),i=a.map(c=>Math.pow(c-s,2));return A({data:i})}function fe({data:a,headerMap:s={}}){if(!Array.isArray(a)||a.length===0)return"";const i=Object.keys(a[0]),c=a.map(u=>Object.values(u)),p=`| ${i.map(u=>{var g;return(g=s[u])!=null?g:u}).join(" | ")} |`,y=`| ${i.map(()=>"---").join(" | ")} |`,d=c.map(u=>`| ${u.join(" | ")} |`).join(`
`);return`${p}
${y}
${d}`}const he=V({__name:"dynamic-values",props:{values:null},emits:["update:values"],setup(a,{emit:s}){const i=a,c=W(),p=J(i,"values",s);async function y(){var u;p.value.push(null),await H(),(u=c.value.at(-1))==null||u.focus()}function d(u){var g;if(u===p.value.length-1){y();return}(g=c.value.at(u+1))==null||g.focus()}return(u,g)=>{const l=E,r=L,_=Q,$=q;return h(),b("div",null,[(h(!0),b(B,null,T(o(p),(x,m)=>(h(),D($,{key:m,wrap:!1,style:{"margin-bottom":"5px"},size:5},{default:n(()=>[e(o(oe),{ref_for:!0,ref:o(c).set,value:o(p)[m],"onUpdate:value":f=>o(p)[m]=f,"show-button":!1,placeholder:"Set your measure...",autofocus:"",onKeydown:G(f=>d(m),["enter"])},null,8,["value","onUpdate:value","onKeydown"]),e(_,null,{trigger:n(()=>[e(r,{circle:"",variant:"text",onClick:f=>o(p).splice(m,1)},{default:n(()=>[e(l,{component:o(K),depth:"3",size:"18"},null,8,["component"])]),_:2},1032,["onClick"])]),default:n(()=>[M(" Delete value ")]),_:2},1024)]),_:2},1024))),128)),e(r,{onClick:y},{default:n(()=>[e(l,{component:o(I),depth:"3","mr-2":"",size:"18"},null,8,["component"]),M(" Add a measure ")]),_:1})])}}}),ve={style:{flex:"0 0 100%"}},we={style:{"max-width":"600px",margin:"0 auto"}},ze=V({__name:"benchmark-builder",setup(a){const s=N("benchmark-builder:suites",[{title:"Suite 1",data:[5,10]},{title:"Suite 2",data:[8,12]}]),i=N("benchmark-builder:unit",""),c=l=>Math.round(l*1e3)/1e3,p=X(()=>s.value.map(({data:l,title:r})=>{const _=l.filter(R.isNumber);return{title:r,size:_.length,mean:A({data:_}),variance:de({data:_})}}).sort((l,r)=>l.mean-r.mean).map(({mean:l,variance:r,size:_,title:$},x,m)=>{const f=i.value.trim(),v=m[0].mean,S=l-v,z=v===0?"\u221E":c(l/v),U=x!==0&&v!==l?` (+${c(S)}${f} ; x${z})`:"";return{position:x+1,title:$,mean:`${c(l)}${f}${U}`,variance:`${c(r)}${f}${f?"\xB2":""}`,size:_}})),{copy:y}=Y(),d={title:"Suite",size:"Samples",mean:"Mean",variance:"Variance",position:"Position"};function u(){y(fe({data:p.value,headerMap:d}))}function g(){const l=p.value.flatMap(({title:r,..._})=>[` - ${r}`,...Object.entries(_).map(([$,x])=>{var m;return`    - ${(m=d[$])!=null?m:$}: ${x}`})]).join(`
`);y(l)}return(l,r)=>{const _=ne,$=se,x=ue,m=te,f=E,v=L,S=q,z=ae,U=le;return h(),b(B,null,[e(z,{style:{flex:"1"},"x-scrollable":""},{default:n(()=>[e(S,{wrap:!1,style:{flex:"1"},justify:"center",size:12,"mb-5":""},{default:n(()=>[(h(!0),b(B,null,T(o(s),(w,j)=>(h(),b("div",{key:j},[e(m,{style:{width:"294px"}},{default:n(()=>[e(_,{value:w.title,"onUpdate:value":C=>w.title=C,"label-position":"left",label:"Suite name",placeholder:"Suite name...",clearable:""},null,8,["value","onUpdate:value"]),e($),e(x,{label:"Suite values","show-feedback":!1},{default:n(()=>[e(he,{values:w.data,"onUpdate:values":C=>w.data=C},null,8,["values","onUpdate:values"])]),_:2},1024)]),_:2},1024),e(S,{justify:"center"},{default:n(()=>[o(s).length>1?(h(),D(v,{key:0,variant:"text",onClick:C=>o(s).splice(j,1)},{default:n(()=>[e(f,{component:o(K),depth:"3","mr-2":"",size:"18"},null,8,["component"]),M(" Delete suite ")]),_:2},1032,["onClick"])):Z("",!0),e(v,{variant:"text",onClick:C=>o(s).splice(j+1,0,{data:[0],title:`Suite ${o(s).length+1}`})},{default:n(()=>[e(f,{component:o(I),depth:"3","mr-2":"",size:"18"},null,8,["component"]),M(" Add suite ")]),_:2},1032,["onClick"])]),_:2},1024)]))),128))]),_:1})]),_:1}),t("div",ve,[t("div",we,[e(S,{justify:"center"},{default:n(()=>[e(_,{value:o(i),"onUpdate:value":r[0]||(r[0]=w=>ee(i)?i.value=w:null),placeholder:"Unit (eg: ms)",label:"Unit","label-position":"left","mb-4":""},null,8,["value"]),e(v,{onClick:r[1]||(r[1]=w=>s.value=[{title:"Suite 1",data:[]},{title:"Suite 2",data:[]}])},{default:n(()=>[M("Reset suites")]),_:1})]),_:1}),e(U,null,{default:n(()=>[t("thead",null,[t("tr",null,[t("th",null,k(d.position),1),t("th",null,k(d.title),1),t("th",null,k(d.size),1),t("th",null,k(d.mean),1),t("th",null,k(d.variance),1)])]),t("tbody",null,[(h(!0),b(B,null,T(o(p),({title:w,size:j,mean:C,variance:O,position:P})=>(h(),b("tr",{key:w},[t("td",null,k(P),1),t("td",null,k(w),1),t("td",null,k(j),1),t("td",null,k(C),1),t("td",null,k(O),1)]))),128))])]),_:1}),e(S,{justify:"center","mt-5":""},{default:n(()=>[e(v,{onClick:u},{default:n(()=>[M("Copy as markdown table")]),_:1}),e(v,{onClick:g},{default:n(()=>[M("Copy as bullet list")]),_:1})]),_:1})])])],64)}}});export{ze as default};
